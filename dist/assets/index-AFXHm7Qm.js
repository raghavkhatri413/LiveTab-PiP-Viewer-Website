import{initializeApp as x}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";import{getDatabase as p,ref as s,get as g,set as c,onValue as f}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();const m={apiKey:"AIzaSyCn2-rTUJxnwp9Pi6jqYWu_xDMxbGl7MUg",authDomain:"live-tab-pip-viewer.firebaseapp.com",databaseURL:"https://live-tab-pip-viewer-default-rtdb.firebaseio.com",projectId:"live-tab-pip-viewer",storageBucket:"live-tab-pip-viewer.firebasestorage.app",messagingSenderId:"769065230447",appId:"1:769065230447:web:e0be917155de2935672d9a",measurementId:"G-3474L6ND6H"},b=x(m),l=p(b),u=document.getElementById("visitorCount"),d=document.getElementById("liveUsers");function v(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var t=Math.random()*16|0,e=i=="x"?t:t&3|8;return e.toString(16)})}function y(){const i=s(l,"visitorCount");let t=localStorage.getItem("deviceId");t||(t=v(),localStorage.setItem("deviceId",t),g(i).then(e=>{let n=e.exists()?e.val():0;c(i,n+1),console.log("Visitor count incremented:",n+1)}).catch(e=>{console.error("Error fetching/setting visitor count:",e)})),f(i,e=>{e.exists()?(u.innerText=`Total Visits: ${e.val()}`,console.log("Visitor count updated:",e.val())):(u.innerText="Total Visits: 0",console.log("No visitor count data."))},e=>{console.error("onValue error for visitor count:",e),u.innerText="Error loading visits."})}function I(){const i=s(l,"liveUsers"),t=v();c(s(l,`liveUsers/${t}`),!0).catch(e=>console.error("Error incrementing live users:",e)),f(i,e=>{if(e.exists()&&typeof e.val()=="object"){const n=Object.keys(e.val()).length;d.innerText=`Live Users: ${n}`,console.log("Live users loaded:",n)}else d.innerText="Live Users: 0",console.log("No live users data")},e=>{console.error("onValue error:",e),d.innerText="Error loading live users."}),window.addEventListener("beforeunload",()=>{c(s(l,`liveUsers/${t}`),null).catch(e=>console.error("Error decrementing live users:",e))}),window.addEventListener("unload",()=>{c(s(l,`liveUsers/${t}`),null).catch(e=>console.error("Error decrementing live users:",e))})}y();I();
